<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <title>‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏ß‡∏¢‡∏°‡∏∏‡∏Å‡∏ã‡∏≤‡∏•‡∏≠‡∏ô</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #fdf5f5;
            margin: 0;
            padding: 0;
            background-size: cover;
            background-position: center;
        }

        header {
            background: #000000;
            color: white;
            text-align: center;
            padding: 15px;
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-content {
            flex: 1;
            text-align: center;
        }

        nav {
            display: flex;
            justify-content: center;
            background: #d0ccff;
            padding: 10px;
        }

        nav button {
            background: none;
            border: none;
            padding: 10px 20px;
            margin: 0 5px;
            cursor: pointer;
            font-weight: bold;
            color: #000000;
        }

        nav button.active {
            border-bottom: 3px solid #ff6666;
        }

        .page {
            display: none;
            padding: 20px;
            text-align: center;
        }

        .activePage {
            display: block;
        }

        .box {
            background: rgba(255, 255, 255, 0.85);
            padding: 20px;
            margin: 20px auto;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        input,
        select,
        button,
        textarea {
            margin: 8px 0;
            padding: 10px;
            width: 90%;
            border: 1px solid #ccc;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.8);
        }

        button {
            background: #33d641;
            color: white;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background: #b0226d;
        }

        .stars span {
            font-size: 24px;
            cursor: pointer;
            color: #ddd;
        }

        .stars span.active {
            color: gold;
        }

        img {
            max-width: 100%;
            border-radius: 10px;
        }

        .message {
            font-size: 22px;
            font-weight: bold;
            color: #000000;
            margin-top: 20px;
        }

        .admin-only {
            display: none;
        }

        .logged-in .admin-only {
            display: block;
        }

        .review-item {
            text-align: left;
            border-bottom: 1px solid #eee;
            padding: 10px 0;
            background: rgba(255, 255, 255, 0.7);
            margin: 10px 0;
            border-radius: 8px;
            padding: 15px;
        }

        .review-name {
            font-weight: bold;
        }

        .review-stars {
            color: gold;
        }

        .login-btn {
            background: #ff3333;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .logout-btn {
            background: #ff3333;
        }

        .line-icon {
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            color: #ff3333;
            font-weight: bold;
        }

        .admin-panel {
            position: absolute;
            right: 15px;
            top: 15px;
        }

        .review-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .review-modal-content {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 12px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .delete-btn {
            background: #ff3333;
            margin-left: 10px;
            padding: 5px 10px;
            font-size: 12px;
        }

        .service-item,
        .holiday-item,
        .promo-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 5px 0;
            padding: 8px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 6px;
        }

        .promo-item {
            background: rgba(255, 255, 255, 0.7);
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
        }

        .booking-item {
            background: rgba(255, 255, 255, 0.7);
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
        }

        #holidayList li,
        #servicesList li {
            background: rgba(255, 255, 255, 0.6);
            padding: 8px;
            border-radius: 6px;
            margin: 5px 0;
        }

        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LINE */
        .line-config {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .test-result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            display: none;
        }

        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .config-section {
            text-align: left;
            margin-bottom: 15px;
        }

        .instructions {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: left;
        }

        .instructions ol {
            padding-left: 20px;
        }

        .instructions li {
            margin-bottom: 10px;
        }

        .qr-code {
            text-align: center;
            margin: 15px 0;
        }

        .qr-code img {
            max-width: 200px;
            border: 1px solid #ddd;
            padding: 10px;
            background: white;
        }

        .line-login-btn {
            background: #06C755;
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 10px 0;
            cursor: pointer;
        }

        .line-login-btn img {
            width: 20px;
            height: 20px;
        }

        .redirect-uri-box {
            background: #fff3cd;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            word-break: break-all;
            font-size: 14px;
        }
    </style>
</head>

<body>
    <header>
        <div class="header-content">
            <h1>‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏ß‡∏¢‡∏°‡∏∏‡∏Å‡∏ã‡∏≤‡∏•‡∏≠‡∏ô ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡πà‡∏∞</h1>
        </div>
        <div class="admin-panel">
            <button id="loginBtn" class="login-btn" onclick="loginWithLine()">
                <span class="line-icon">L</span> ‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô
            </button>
            <div id="adminMenu" class="admin-only">
                <button onclick="showPage('manage')">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô</button>
                <button class="logout-btn" onclick="logout()">‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏≠‡∏≤‡∏ó‡πå</button>
            </div>
        </div>
    </header>

    <nav>
        <button class="active" onclick="showPage('home')">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
        <button onclick="showPage('booking')">‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß</button>
        <button onclick="showPage('promo')">‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô</button>
        <button onclick="showPage('reviews')">‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</button>
    </nav>

    <!-- ‡∏´‡∏ô‡πâ‡∏≤ Home -->
    <div id="home" class="page activePage">
        <div class="box">
            <h2>‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏£‡πâ‡∏≤‡∏ô</h2>
            <ul id="servicesList" style="text-align:left; list-style-type: none; padding: 0;">
                <!-- ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å localStorage -->
            </ul>
            <div class="admin-only">
                <h3>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h3>
                <input type="text" id="newServiceName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£">
                <input type="text" id="newServicePrice" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤">
                <button onclick="addService()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</button>
            </div>

            <h3>‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô</h3>
            <ul id="holidayList" style="color:red; text-align:left; list-style-type: none; padding: 0;"></ul>
            <div class="admin-only">
                <input type="date" id="newHoliday">
                <button onclick="addHoliday()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</button>
            </div>
        </div>
    </div>

    <!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô -->
    <div id="promo" class="page">
        <div class="box">
            <h2>‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô</h2>
            <div id="promoContent">
                <!-- ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å localStorage -->
            </div>

            <div class="admin-only">
                <h3>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô</h3>
                <input type="text" id="promoTitle" placeholder="‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô">
                <textarea id="promoDescription" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô" rows="3"></textarea>
                <input type="file" id="promoImageFile" accept="image/*">
                <button onclick="addPromo()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô</button>
            </div>
        </div>
    </div>

    <!-- ‡∏´‡∏ô‡πâ‡∏≤ Booking -->
    <div id="booking" class="page">
        <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
        <div class="box" id="formBox">
            <h2>‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h2>
            <input type="text" id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
            <input type="tel" id="phone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå">
            <button onclick="goToCalendar()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
        </div>

        <!-- ‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô -->
        <div class="box" id="calendarBox" style="display:none;">
            <h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤</h2>
            <input type="date" id="date">
            <select id="time"></select>
            <button onclick="reviewBooking()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
        </div>

        <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡∏∏‡∏õ -->
        <div class="box" id="confirmBox" style="display:none;">
            <h2>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</h2>
            <p id="bookingInfo"></p>
            <button onclick="lockBooking()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</button>
            <button onclick="editBooking()">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
            <button onclick="cancelBooking()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</button>
        </div>
    </div>

    <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏µ‡∏ß‡∏¥‡∏ß -->
    <div id="reviews" class="page">
        <div class="box">
            <h2>‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h2>
            <div id="reviewsList">
                <!-- ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
            </div>
        </div>
    </div>

    <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô) -->
    <div id="manage" class="page">
        <div class="box">
            <h2>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô</h2>
            <button onclick="showPage('home')">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</button>
            <button onclick="showPage('promo')">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô</button>

            <div class="box">
                <h2>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏£‡πâ‡∏≤‡∏ô</h2>
                <input type="file" id="bgUpload" accept="image/*" style="display: none;"
                    onchange="uploadBackground(event)">
                <button onclick="document.getElementById('bgUpload').click()">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÉ‡∏´‡∏°‡πà</button>
                <button onclick="removeBackground()" class="delete-btn">‡∏•‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á</button>
            </div>

            <div class="box">
                <h2>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô LINE</h2>
                <div class="line-config">
                    <div class="instructions">
                        <h3>‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LINE Messaging API</h3>
                        <ol>
                            <li>‡πÑ‡∏õ‡∏ó‡∏µ‡πà <a href="https://developers.line.biz/console/" target="_blank">LINE Developers Console</a></li>
                            <li>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Channel ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó Messaging API)</li>
                            <li>‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πá‡∏ö "Messaging API"</li>
                            <li>‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å "Channel Access Token" ‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á</li>
                            <li>‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤ User ID:
                                <ol>
                                    <li>‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏≠‡∏õ LINE ‡πÉ‡∏ô‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</li>
                                    <li>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏≠‡∏ó‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô (‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ Channel)</li>
                                    <li>‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏î‡πÜ ‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡∏ö‡∏≠‡∏ó</li>
                                    <li>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏î‡∏∂‡∏á User ID ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥" ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á</li>
                                </ol>
                            </li>
                        </ol>
                        
                        <div class="redirect-uri-box">
                            <strong>Redirect URI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö LINE Login:</strong><br>
                            <span id="redirectUriDisplay"></span>
                        </div>
                        
                        <p><strong>‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</strong> ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å URL ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÉ‡∏ô LINE Developer Console ‚Üí Channel ‚Üí LINE Login ‚Üí Redirect URLs</p>
                    </div>

                    <div class="config-section">
                        <label for="lineChannelToken">Channel Access Token:</label>
                        <input type="password" id="lineChannelToken" placeholder="‡πÉ‡∏™‡πà Channel Access Token"
                            style="width: 100%;">
                        <small>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà LINE Developers Console > Channel > Messaging API</small>
                    </div>

                    <div class="config-section">
                        <label for="lineUserId">User ID ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="lineUserId" placeholder="‡πÉ‡∏™‡πà User ID ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" style="flex: 1;">
                            <button onclick="getUserIdWithLineLogin()" style="width: auto; white-space: nowrap;">‡∏î‡∏∂‡∏á User ID ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</button>
                        </div>
                    </div>

                    <button onclick="saveLineConfig()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</button>
                    <button onclick="testLineConnection()" style="background: #2196F3;">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠</button>

                    <div id="testResult" class="test-result"></div>
                </div>
            </div>

            <h3>‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
            <div id="bookingList">
                <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
            </div>
        </div>
    </div>

    <!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß -->
    <div class="review-modal" id="reviewModal">
        <div class="review-modal-content">
            <h2>‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h2>
            <input type="text" id="reviewerName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)">
            <div class="stars" id="modalStars">
                <span onclick="setModalRating(1)">‚òÖ</span>
                <span onclick="setModalRating(2)">‚òÖ</span>
                <span onclick="setModalRating(3)">‚òÖ</span>
                <span onclick="setModalRating(4)">‚òÖ</span>
                <span onclick="setModalRating(5)">‚òÖ</span>
            </div>
            <textarea id="reviewComment" placeholder="‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô (‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)" rows="3"></textarea>
            <button onclick="submitReview()">‡∏™‡πà‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</button>
            <p id="thanksMsg"></p>
        </div>
    </div>

    <!-- LINE Login Modal -->
    <div id="lineLoginModal" class="review-modal">
        <div class="review-modal-content">
            <h2>‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢ LINE</h2>
            <p>‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á User ID ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ö‡∏±‡∏ç‡∏ä‡∏µ LINE ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
            
            <div id="manualMethod">
                <h3>‡∏ß‡∏¥‡∏ò‡∏µ‡∏î‡∏∂‡∏á User ID ‡πÅ‡∏ö‡∏ö Manual</h3>
                <ol style="text-align: left;">
                    <li>‡πÑ‡∏õ‡∏ó‡∏µ‡πà <a href="https://developers.line.biz/console/" target="_blank">LINE Developers Console</a></li>
                    <li>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Channel ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</li>
                    <li>‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πá‡∏ö "Messaging API"</li>
                    <li>‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏•‡∏á‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏ß‡∏ô "Webhook"</li>
                    <li>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "Verify" (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢ verify)</li>
                    <li>‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏î‡πÜ ‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡∏ö‡∏≠‡∏ó‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ô‡πÅ‡∏≠‡∏õ LINE</li>
                    <li>User ID ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á "Webhook event list"</li>
                    <li>‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å User ID ‡∏ô‡∏±‡πâ‡∏ô‡∏°‡∏≤‡πÉ‡∏™‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô</li>
                </ol>
            </div>
            
            <button onclick="closeLineLoginModal()" style="background: #ff3333; margin-top: 10px;">‡∏õ‡∏¥‡∏î</button>
        </div>
    </div>
    <script>
        // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ global
        const timeSelect = document.getElementById("time");
        for (let h = 8; h <= 20; h++) {
            let option = document.createElement("option");
            option.value = `${h}:00`;
            option.textContent = `${h}:00`;
            timeSelect.appendChild(option);
        }

        let booking = {};
        let bookingLocked = false;
        let currentRating = 0;
        let isLoggedIn = false;
        let holidays = JSON.parse(localStorage.getItem('holidays')) || ["2025-09-01", "2025-09-10"];
        let services = JSON.parse(localStorage.getItem('services')) || [
            "‡∏™‡∏£‡∏∞ - ‡πÑ‡∏î‡∏£‡πå ‡∏ú‡∏°‡∏ï‡∏£‡∏á 60-150 ‡∏ö‡∏≤‡∏ó",
            "‡∏™‡∏£‡∏∞ - ‡πÑ‡∏î‡∏£‡πå ‡∏´‡∏ô‡∏µ‡∏ö 80-150 ‡∏ö‡∏≤‡∏ó",
            "‡∏™‡∏£‡∏∞‡∏ú‡∏° - ‡πÄ‡∏î‡πá‡∏Å‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 20-80 ‡∏ö‡∏≤‡∏ó",
            "‡∏™‡∏õ‡∏≤‡∏ô‡∏≤‡πÇ‡∏ô ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà 399 ‡∏ö‡∏≤‡∏ó"
        ];
        let promotions = JSON.parse(localStorage.getItem('promotions')) || [];
        let reviews = JSON.parse(localStorage.getItem('reviews')) || [];
        let bookings = JSON.parse(localStorage.getItem('bookings')) || [];

        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LINE
        let lineConfig = JSON.parse(localStorage.getItem('lineConfig')) || {
            channelToken: '',
            userId: ''
        };

        // ‡πÅ‡∏™‡∏î‡∏á Redirect URI
        document.getElementById('redirectUriDisplay').textContent = window.location.href;

        // ‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LINE ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÇ‡∏´‡∏•‡∏î
        window.addEventListener('DOMContentLoaded', (event) => {
            document.getElementById('lineChannelToken').value = lineConfig.channelToken || '';
            document.getElementById('lineUserId').value = lineConfig.userId || '';
        });

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤
        function showPage(page) {
            document.querySelectorAll(".page").forEach(p => p.classList.remove("activePage"));
            document.getElementById(page).classList.add("activePage");
            document.querySelectorAll("nav button").forEach(b => b.classList.remove("active"));

            // ‡∏´‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô active
            const navButtons = document.querySelectorAll("nav button");
            for (let btn of navButtons) {
                if (btn.textContent === "‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å" && page === "home") btn.classList.add("active");
                if (btn.textContent === "‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß" && page === "booking") btn.classList.add("active");
                if (btn.textContent === "‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô" && page === "promo") btn.classList.add("active");
                if (btn.textContent === "‡∏£‡∏µ‡∏ß‡∏¥‡∏ß" && page === "reviews") btn.classList.add("active");
            }

            if (page === "booking") resetBookingForm();
            if (page === "home") {
                renderHolidays();
                renderServices();
            }
            if (page === "promo") renderPromotions();
            if (page === "reviews") renderReviews();
            if (page === "manage") renderBookings();
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô LINE
        function getUserIdWithLineLogin() {
            const channelToken = document.getElementById('lineChannelToken').value;

            if (!channelToken) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å Channel Access Token ‡∏Å‡πà‡∏≠‡∏ô');
                return;
            }

            // ‡πÄ‡∏õ‡∏¥‡∏î modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô LINE
            openLineLoginModal();
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î modal ‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô LINE
        function openLineLoginModal() {
            document.getElementById("lineLoginModal").style.display = "flex";
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏¥‡∏î modal ‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô LINE
        function closeLineLoginModal() {
            document.getElementById("lineLoginModal").style.display = "none";
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LINE
        function saveLineConfig() {
            lineConfig.channelToken = document.getElementById('lineChannelToken').value;
            lineConfig.userId = document.getElementById('lineUserId').value;

            localStorage.setItem('lineConfig', JSON.stringify(lineConfig));
            alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LINE ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ LINE
        function testLineConnection() {
            if (!lineConfig.channelToken || !lineConfig.userId) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å Channel Access Token ‡πÅ‡∏•‡∏∞ User ID ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                return;
            }

            const testResult = document.getElementById('testResult');
            testResult.style.display = 'block';
            testResult.className = 'test-result';
            testResult.innerHTML = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...';

            sendToLine("üîî ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏ß‡∏¢‡∏°‡∏∏‡∏Å‡∏ã‡∏≤‡∏•‡∏≠‡∏ô\n‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß")
                .then(() => {
                    testResult.classList.add('success');
                    testResult.innerHTML = '‚úÖ ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á LINE ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß';
                })
                .catch(error => {
                    testResult.classList.add('error');
                    testResult.innerHTML = '‚ùå ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß: ' + error;
                });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡πà‡∏≤‡∏ô LINE Messaging API
        async function sendToLine(message) {
            if (!lineConfig.channelToken || !lineConfig.userId) {
                console.error("‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LINE Messaging API");
                throw new Error("‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LINE Messaging API");
            }

            try {
                const response = await fetch("https://api.line.me/v2/bot/message/push", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": "Bearer " + lineConfig.channelToken
                    },
                    body: JSON.stringify({
                        to: lineConfig.userId,
                        messages: [{
                            type: "text",
                            text: message
                        }]
                    })
                });

                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`LINE API error: ${response.status} - ${errorText}`);
                }

                const data = await response.json();
                console.log("‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡πà‡∏≤‡∏ô LINE ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:", data);
                return data;
            } catch (error) {
                console.error("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡πà‡∏≤‡∏ô LINE:", error);
                throw error;
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏à‡∏≠‡∏á
        function resetBookingForm() {
            booking = {};
            bookingLocked = false;
            document.querySelectorAll("#booking .box").forEach(b => b.style.display = "none");
            document.getElementById("formBox").style.display = "block";
            document.getElementById("name").value = "";
            document.getElementById("phone").value = "";
            document.getElementById("date").value = "";
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô
        function goToCalendar() {
            booking.name = document.getElementById("name").value;
            booking.phone = document.getElementById("phone").value;
            if (!booking.name || !booking.phone) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
                return;
            }
            document.getElementById("formBox").style.display = "none";
            document.getElementById("calendarBox").style.display = "block";
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        function reviewBooking() {
            booking.date = document.getElementById("date").value;
            booking.time = document.getElementById("time").value;
            if (!booking.date || !booking.time) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤");
                return;
            }
            if (holidays.includes(booking.date)) {
                alert("‡∏ß‡∏±‡∏ô‡∏î‡∏±‡∏á‡∏Å‡∏•‡πà‡∏≤‡∏ß‡∏£‡πâ‡∏≤‡∏ô‡∏õ‡∏¥‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏≠‡∏∑‡πà‡∏ô");
                return;
            }
            document.getElementById("calendarBox").style.display = "none";
            document.getElementById("confirmBox").style.display = "block";
            document.getElementById("bookingInfo").innerText = `‡∏Ñ‡∏∏‡∏ì ${booking.name} ‡πÄ‡∏ö‡∏≠‡∏£‡πå ${booking.phone}\n‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${booking.date} ‡πÄ‡∏ß‡∏•‡∏≤ ${booking.time}`;
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        function lockBooking() {
            if (bookingLocked) return;
            bookingLocked = true;
            document.getElementById("confirmBox").innerHTML = `<p class="message">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏à‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏∞</p>`;

            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
            bookings.push({
                name: booking.name,
                phone: booking.phone,
                date: booking.date,
                time: booking.time,
                timestamp: new Date().toISOString()
            });
            localStorage.setItem('bookings', JSON.stringify(bookings));

            // ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô LINE
            const bookingMessage = `‚úÖ ‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå
‡∏ä‡∏∑‡πà‡∏≠: ${booking.name}
‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£: ${booking.phone}
‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${booking.date}
‡πÄ‡∏ß‡∏•‡∏≤: ${booking.time}`;

            sendToLine(bookingMessage)
                .then(() => console.log("‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡∏ú‡πà‡∏≤‡∏ô LINE ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à"))
                .catch(error => console.error("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô LINE ‡πÑ‡∏î‡πâ:", error));

            // ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏£‡∏µ‡∏ß‡∏¥‡∏ß
            setTimeout(() => {
                showReviewModal();
            }, 1500);
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        function editBooking() {
            if (bookingLocked) {
                alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß");
                return;
            }
            document.getElementById("confirmBox").style.display = "none";
            document.getElementById("calendarBox").style.display = "block";
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        function cancelBooking() {
            document.getElementById("confirmBox").innerHTML = `<p class="message">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏∞</p>`;

            // ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏ú‡πà‡∏≤‡∏ô LINE
            const cancelMessage = `‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
‡∏ä‡∏∑‡πà‡∏≠: ${booking.name}
‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£: ${booking.phone}
‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${booking.date}
‡πÄ‡∏ß‡∏•‡∏≤: ${booking.time}`;

            sendToLine(cancelMessage)
                .then(() => console.log("‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô LINE ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à"))
                .catch(error => console.error("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô LINE ‡πÑ‡∏î‡πâ:", error));

            setTimeout(() => {
                showPage("home");
            }, 2000);
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÉ‡∏ô modal
        function setModalRating(stars) {
            currentRating = stars;
            document.querySelectorAll("#modalStars span").forEach((s, i) => {
                s.classList.toggle("active", i < stars);
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á modal ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß
        function showReviewModal() {
            const modal = document.getElementById("reviewModal");
            modal.style.display = "flex";

            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏£‡∏µ‡∏ß‡∏¥‡∏ß
            document.getElementById("reviewerName").value = "";
            document.getElementById("reviewComment").value = "";
            currentRating = 0;
            document.querySelectorAll("#modalStars span").forEach(s => {
                s.classList.remove("active");
            });
            document.getElementById("thanksMsg").innerText = "";
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏¥‡∏î modal ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß
        function closeReviewModal() {
            document.getElementById("reviewModal").style.display = "none";
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß
        function submitReview() {
            const reviewerName = document.getElementById("reviewerName").value || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠";
            const comment = document.getElementById("reviewComment").value;

            if (currentRating === 0) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏î‡∏≤‡∏ß‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß");
                return;
            }

            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏µ‡∏ß‡∏¥‡∏ß
            reviews.push({
                name: reviewerName,
                rating: currentRating,
                comment: comment,
                date: new Date().toLocaleDateString('th-TH')
            });
            localStorage.setItem('reviews', JSON.stringify(reviews));

            document.getElementById("thanksMsg").innerText = "‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡∏ß‡∏¥‡∏ß";

            // ‡∏õ‡∏¥‡∏î modal ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            setTimeout(() => {
                closeReviewModal();
                showPage("home");
            }, 3000);
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢ LINE
        function loginWithLine() {
            // ‡πÉ‡∏ô‡∏ó‡∏≤‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ LINE Login API
            // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö
            const lineUserId = prompt("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å LINE User ID ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö)");
            if (lineUserId) {
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢)
                if (lineUserId === "muksalon157") { // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô ID ‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô
                    isLoggedIn = true;
                    document.body.classList.add('logged-in');
                    alert("‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
                } else {
                    alert("‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ");
                }
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏≠‡∏≤‡∏ó‡πå
        function logout() {
            isLoggedIn = false;
            document.body.classList.remove('logged-in');
            alert("‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏≠‡∏≤‡∏ó‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢");
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î
        function renderHolidays() {
            const ul = document.getElementById("holidayList");
            ul.innerHTML = "";
            holidays.forEach((day, index) => {
                let li = document.createElement("li");
                li.className = "holiday-item";

                let span = document.createElement("span");
                span.textContent = day;

                let deleteBtn = document.createElement("button");
                deleteBtn.textContent = "‡∏•‡∏ö";
                deleteBtn.className = "delete-btn";
                deleteBtn.onclick = function () { deleteHoliday(index); };

                li.appendChild(span);
                if (isLoggedIn) {
                    li.appendChild(deleteBtn);
                }
                ul.appendChild(li);
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
        function renderServices() {
            const ul = document.getElementById("servicesList");
            ul.innerHTML = "";
            services.forEach((service, index) => {
                let li = document.createElement("li");
                li.className = "service-item";

                let span = document.createElement("span");
                span.textContent = service;

                let deleteBtn = document.createElement("button");
                deleteBtn.textContent = "‡∏•‡∏ö";
                deleteBtn.className = "delete-btn";
                deleteBtn.onclick = function () { deleteService(index); };

                li.appendChild(span);
                if (isLoggedIn) {
                    li.appendChild(deleteBtn);
                }
                ul.appendChild(li);
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
        function addService() {
            const name = document.getElementById("newServiceName").value;
            const price = document.getElementById("newServicePrice").value;

            if (!name || !price) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤");
                return;
            }

            services.push(`${name} ${price} ‡∏ö‡∏≤‡∏ó`);
            localStorage.setItem('services', JSON.stringify(services));

            document.getElementById("newServiceName").value = "";
            document.getElementById("newServicePrice").value = "";

            renderServices();
            alert("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
        function deleteService(index) {
            if (!isLoggedIn) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•");
                return;
            }

            if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ?")) {
                services.splice(index, 1);
                localStorage.setItem('services', JSON.stringify(services));
                renderServices();
                alert("‡∏•‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î
        function addHoliday() {
            const newHoliday = document.getElementById("newHoliday").value;
            if (!newHoliday) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà");
                return;
            }

            holidays.push(newHoliday);
            localStorage.setItem('holidays', JSON.stringify(holidays));

            document.getElementById("newHoliday").value = "";
            renderHolidays();
            alert("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î
        function deleteHoliday(index) {
            if (!isLoggedIn) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•");
                return;
            }

            if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏ô‡∏µ‡πâ?")) {
                holidays.splice(index, 1);
                localStorage.setItem('holidays', JSON.stringify(holidays));
                renderHolidays();
                alert("‡∏•‡∏ö‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô
        function renderPromotions() {
            const container = document.getElementById("promoContent");
            container.innerHTML = "";

            if (promotions.length === 0) {
                container.innerHTML = "<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô</p>";
                return;
            }

            promotions.forEach((promo, index) => {
                const promoDiv = document.createElement("div");
                promoDiv.className = "promo-item";

                const promoContent = document.createElement("div");
                promoContent.innerHTML = `
                    <h3>${promo.title}</h3>
                    <p>${promo.description}</p>
                    ${promo.image ? `<img src="${promo.image}" alt="${promo.title}" style="max-width: 100%;">` : ''}
                `;

                const deleteBtn = document.createElement("button");
                deleteBtn.textContent = "‡∏•‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô";
                deleteBtn.className = "delete-btn";
                deleteBtn.onclick = function () { deletePromo(index); };

                promoDiv.appendChild(promoContent);
                if (isLoggedIn) {
                    promoDiv.appendChild(deleteBtn);
                }
                container.appendChild(promoDiv);
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô
        function addPromo() {
            const title = document.getElementById("promoTitle").value;
            const description = document.getElementById("promoDescription").value;
            const fileInput = document.getElementById("promoImageFile");
            const file = fileInput.files[0];

            if (!title || !description) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô");
                return;
            }

            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    promotions.push({ title, description, image: e.target.result });
                    localStorage.setItem('promotions', JSON.stringify(promotions));
                    resetForm();
                    renderPromotions();
                    alert("‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
                };
                reader.readAsDataURL(file); // ‡πÅ‡∏õ‡∏•‡∏á‡∏£‡∏π‡∏õ‡πÄ‡∏õ‡πá‡∏ô Base64
            } else {
                promotions.push({ title, description, image: "" });
                localStorage.setItem('promotions', JSON.stringify(promotions));
                resetForm();
                renderPromotions();
                alert("‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô
        function deletePromo(index) {
            if (!isLoggedIn) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•");
                return;
            }

            if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ?")) {
                promotions.splice(index, 1);
                localStorage.setItem('promotions', JSON.stringify(promotions));
                renderPromotions();
                alert("‡∏•‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
            }
        }

        // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°
        function resetForm() {
            document.getElementById("promoTitle").value = "";
            document.getElementById("promoDescription").value = "";
            document.getElementById("promoImageFile").value = "";
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß
        function renderReviews() {
            const container = document.getElementById("reviewsList");
            container.innerHTML = "";

            if (reviews.length === 0) {
                container.innerHTML = "<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</p>";
                return;
            }

            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏à‡∏≤‡∏Å‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÑ‡∏õ‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏∏‡∏î
            const sortedReviews = [...reviews].reverse();

            sortedReviews.forEach((review, index) => {
                const reviewDiv = document.createElement("div");
                reviewDiv.className = "review-item";

                let stars = "";
                for (let i = 0; i < 5; i++) {
                    stars += i < review.rating ? "‚òÖ" : "‚òÜ";
                }

                reviewDiv.innerHTML = `
                    <div class="review-name">${review.name}</div>
                    <div class="review-stars">${stars}</div>
                    <div>${review.comment || "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢"}</div>
                    <div style="font-size: 12px; color: #777;">${review.date}</div>
                `;

                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô
                if (isLoggedIn) {
                    const deleteBtn = document.createElement("button");
                    deleteBtn.textContent = "‡∏•‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß";
                    deleteBtn.className = "delete-btn";
                    deleteBtn.onclick = function () {
                        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡∏±‡∏ä‡∏ô‡∏µ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÉ‡∏´‡∏°‡πà
                        const actualIndex = reviews.length - 1 - index;
                        deleteReview(actualIndex);
                    };
                    reviewDiv.appendChild(deleteBtn);
                }

                container.appendChild(reviewDiv);
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß
        function deleteReview(index) {
            if (!isLoggedIn) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•");
                return;
            }

            if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏ô‡∏µ‡πâ?")) {
                reviews.splice(index, 1);
                localStorage.setItem('reviews', JSON.stringify(reviews));
                renderReviews();
                alert("‡∏•‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        function renderBookings() {
            const container = document.getElementById("bookingList");
            container.innerHTML = "";

            if (bookings.length === 0) {
                container.innerHTML = "<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</p>";
                return;
            }

            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÑ‡∏õ‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏∏‡∏î
            const sortedBookings = [...bookings].reverse();

            sortedBookings.forEach((booking, index) => {
                const bookingDiv = document.createElement("div");
                bookingDiv.className = "booking-item";

                bookingDiv.innerHTML = `
                    <p><strong>‡∏ä‡∏∑‡πà‡∏≠:</strong> ${booking.name}</p>
                    <p><strong>‡πÇ‡∏ó‡∏£:</strong> ${booking.phone}</p>
                    <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> ${booking.date}</p>
                    <p><strong>‡πÄ‡∏ß‡∏•‡∏≤:</strong> ${booking.time}</p>
                    <p><strong>‡∏à‡∏≠‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠:</strong> ${new Date(booking.timestamp).toLocaleString('th-TH')}</p>
                `;

                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô
                if (isLoggedIn) {
                    const deleteBtn = document.createElement("button");
                    deleteBtn.textContent = "‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á";
                    deleteBtn.className = "delete-btn";
                    deleteBtn.onclick = function () {
                        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡∏±‡∏ä‡∏ô‡∏µ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÉ‡∏´‡∏°‡πà
                        const actualIndex = bookings.length - 1 - index;
                        deleteBooking(actualIndex);
                    };
                    bookingDiv.appendChild(deleteBtn);
                }

                bookingDiv.innerHTML += "<hr>";
                container.appendChild(bookingDiv);
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        function deleteBooking(index) {
            if (!isLoggedIn) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•");
                return;
            }

            if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ô‡∏µ‡πâ?")) {
                bookings.splice(index, 1);
                localStorage.setItem('bookings', JSON.stringify(bookings));
                renderBookings();
                alert("‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
        function uploadBackground(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    localStorage.setItem('backgroundImage', e.target.result);
                    document.body.style.backgroundImage = `url(${e.target.result})`;
                    alert("‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
                };
                reader.readAsDataURL(file);
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô‡∏•‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
        function removeBackground() {
            localStorage.removeItem('backgroundImage');
            document.body.style.backgroundImage = '';
            alert("‡∏•‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
        }

        // ‡πÇ‡∏´‡∏•‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏≠‡∏õ
        const savedBg = localStorage.getItem('backgroundImage');
        if (savedBg) {
            document.body.style.backgroundImage = `url(${savedBg})`;
        }

        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
        window.onload = function () {
            renderHolidays();
            renderServices();
            renderPromotions();
            renderReviews();

            // ‡πÄ‡∏û‡∏¥‡πà‡∏° event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ô‡∏≠‡∏Å modal ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î
            document.getElementById("reviewModal").addEventListener("click", function (e) {
                if (e.target === this) {
                    closeReviewModal();
                    showPage("home");
                }
            });
            
            document.getElementById("lineLoginModal").addEventListener("click", function (e) {
                if (e.target === this) {
                    closeLineLoginModal();
                }
            });
        };
    </script>
</body>

</html>